<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book API Documentation</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>Book API Documentation</h1>
    <p>Welcome to the Book API. Use this documentation to interact with the API endpoints.</p>
  </header>
  <div class="container">
    <div class="content">
      <section>
        <h2>API Endpoints</h2>

        <div class="endpoint">
          <h3>GET /api/books</h3>
          <p>Retrieve all books.</p>
          <pre>
curl -X GET "https://your-project.vercel.app/api/books" -H "Authorization: Bearer YOUR_TOKEN"
          </pre>
        </div>

        <div class="endpoint">
          <h3>GET /api/books/{id}</h3>
          <p>Retrieve a book by ID.</p>
          <pre>
curl -X GET "https://your-project.vercel.app/api/books/{id}" -H "Authorization: Bearer YOUR_TOKEN"
          </pre>
        </div>

        <div class="endpoint">
          <h3>POST /api/books</h3>
          <p>Create a new book. Do not include the ID in the request body.</p>
          <pre>
curl -X POST "https://your-project.vercel.app/api/books" -H "Authorization: Bearer YOUR_TOKEN" -H "Content-Type: application/json" -d '{
  "title": "Book Title",
  "description": "Book Description",
  "pages": 123
}'
          </pre>
        </div>

        <div class="endpoint">
          <h3>PUT /api/books/{id}</h3>
          <p>Replace a book by ID. You must provide all fields in the request body.</p>
          <pre>
curl -X PUT "https://your-project.vercel.app/api/books/{id}" -H "Authorization: Bearer YOUR_TOKEN" -H "Content-Type: application/json" -d '{
  "title": "Updated Title",
  "description": "Updated Description",
  "pages": 456
}'
          </pre>
        </div>

        <div class="endpoint">
          <h3>PATCH /api/books/{id}</h3>
          <p>Partially update a book by ID. Only include the fields you want to update.</p>
          <pre>
curl -X PATCH "https://your-project.vercel.app/api/books/{id}" -H "Authorization: Bearer YOUR_TOKEN" -H "Content-Type: application/json" -d '{
  "title": "Partially Updated Title"
}'
          </pre>
        </div>

        <div class="endpoint">
          <h3>DELETE /api/books/{id}</h3>
          <p>Delete a book by ID.</p>
          <pre>
curl -X DELETE "https://your-project.vercel.app/api/books/{id}" -H "Authorization: Bearer YOUR_TOKEN"
          </pre>
        </div>

        <div class="endpoint">
          <h3>DELETE /api/books</h3>
          <p>Delete all books.</p>
          <pre>
curl -X DELETE "https://your-project.vercel.app/api/books" -H "Authorization: Bearer YOUR_TOKEN"
          </pre>
        </div>

        <div class="endpoint">
          <h3>GET /api/books-pages/paginate</h3>
          <p>Paginate through books. Specify the page number and the limit of books per page.</p>
          <pre>
curl -X GET "https://your-project.vercel.app/api/books-pages/paginate?page=1&limit=3" -H "Authorization: Bearer YOUR_TOKEN"
          </pre>
        </div>

        <div class="endpoint">
          <h3>GET /api/books/filter/title</h3>
          <p>Filter books by title.</p>
          <pre>
curl -X GET "https://your-project.vercel.app/api/books/filter/title?title=Book%20Title" -H "Authorization: Bearer YOUR_TOKEN"
          </pre>
        </div>

        <div class="endpoint">
          <h3>GET /api/books/filter/description</h3>
          <p>Filter books by description.</p>
          <pre>
curl -X GET "https://your-project.vercel.app/api/books/filter/description?description=Book%20Description" -H "Authorization: Bearer YOUR_TOKEN"
          </pre>
        </div>

        <div class="endpoint">
          <h3>GET /api/books/filter/pages</h3>
          <p>Filter books by the number of pages.</p>
          <pre>
curl -X GET "https://your-project.vercel.app/api/books/filter/pages?pages=123" -H "Authorization: Bearer YOUR_TOKEN"
          </pre>
        </div>

        <div class="endpoint">
          <h3>POST /api/login</h3>
          <p>Authenticate and get a JWT token.</p>
          <pre>
curl -X POST "https://your-project.vercel.app/api/login" -H "Content-Type: application/json" -d '{
  "username": "your-username",
  "password": "your-password"
}'
          </pre>
        </div>
      </section>
      <section>
        <h2>Authentication</h2>
        <p>This API uses JWT for authentication. You need to include a valid JWT token in the Authorization header for all requests except login.</p>
        <pre>
-H "Authorization: Bearer YOUR_TOKEN"
        </pre>
      </section>
      <section>
        <h2>PostgreSQL Database</h2>
        <p>This API uses PostgreSQL for data storage. Make sure to set up your PostgreSQL database and provide the connection URL as an environment variable.</p>
        <pre>
POSTGRES_URL=your_postgres_url
        </pre>
      </section>
      <section>
        <h2>Installation</h2>
        <h3>Prerequisites</h3>
        <ul>
          <li>Node.js (>=14.x)</li>
          <li>npm (>=6.x)</li>
          <li>PostgreSQL (for local development)</li>
        </ul>
        <h3>Steps</h3>
        <ol>
          <li>Clone the repository:</li>
          <pre>
git clone https://github.com/PierreSwtich/qa-simple-book-api.git
cd qa-simple-book-api
          </pre>
          <li>Install dependencies:</li>
          <pre>
npm install
          </pre>
          <li>Set up environment variables in a `.env` file:</li>
          <pre>
SECRET_KEY=your_secret_key
USERNAMEADMIN=your_username
PASSWORDADMIN=your_password
POSTGRES_URL=your_postgres_url
          </pre>
          <li>Run the application locally:</li>
          <pre>
npm run dev
          </pre>
        </ol>
        <p>The server will start on <code>http://localhost:3000</code>. Swagger UI is available at <code>http://localhost:3000/api-docs</code>.</p>
      </section>
    </div>
  </div>
  <footer>
    <p>&copy; 2024 Book API. All rights reserved.</p>
  </footer>
</body>
</html>
